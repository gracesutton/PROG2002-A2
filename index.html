<!DOCTYPE html>
<html>
  <head>
      <title>Home page</title>
      <link rel="stylesheet" href="style.css"/>
  </head>
  <script>
    // javascript can go here
  </script>
  <body>
    <!-- Navigation Menu -->
    <header class="navbar">
        <h1>Gold Coast Charity Connect</h1>
        <a href="/"><button>Home</button></a>
        <a href="/search"><button>Search</button></a>
    </header>

    <p>Hi, and welcome to Gold Coast Charity Connect! The one place to find out about local charity events in our area. Click on an event to learn more and register!</p>

 

    <!-- Upcoming Events -->
    <h2>Upcoming Events</h2>
    <section id="upcoming-events-box">
         <div id="upcomingEventsDiv"></div>
    </section>

    <!-- Past Events -->
    <h2>Past Events</h2>
    <section id="past-events-box">
        <div id="pastEventsDiv"></div>
    </section>

    <img src="header.jpeg" width="100%">

    <script>
      // Fetch upcoming events
      fetch('http://localhost:8080/api/events')
        .then(response => response.json())
        .then(data => {

          const upcomingEventsDiv = document.getElementById('upcomingEventsDiv');
          const pastEventsDiv = document.getElementById('pastEventsDiv');
          upcomingEventsDiv.innerHTML = "";
          pastEventsDiv.innerHTML = "";

          const today = new Date();
          today.setHours(0,0,0,0); // normalise to midnight

          if(data.length>0) {
            data.forEach(event => {

              const eventDate = new Date(event.EventDate);
              eventDate.setHours(0,0,0,0);

              const eventDiv = document.createElement('div');
              eventDiv.className = 'event';
              eventDiv.innerHTML = `
                <h3>${event.EventName}</h3>
                <p>${event.Description}</p>
                <p>Date: ${new Date(event.EventDate).toLocaleDateString()}</p>
                <p>Location: ${event.Location}</p>
              `;
              if (eventDate >= today) {
                upcomingEventsDiv.appendChild(eventDiv);
              } else {
                pastEventsDiv.appendChild(eventDiv);
              }            
            });
          } else {
            upcomingEventsDiv.innerHTML = "No events to show";
            pastEventsDiv.innerHTML = "No events to show";
          }
        })
        .catch(error => {
          console.error('Error fetching events:', error);
          document.getElementById('upcomingEventsDiv').innerHTML = "Failed to load events";
          document.getElementById('pastEventsDiv').innerHTML = "Failed to load events";
        });

    </script>

  </body>
</html>
